<div class="dashboard-container">
    <div class="stats-grid">
        <div class="stat-card blue">
            <div class="card-title">Qu·ªπ hi·ªán t·∫°i</div>
            <div class="card-number" id="stat-remain">ƒêang t·∫£i...</div>
        </div>
        <div class="stat-card green">
            <div class="card-title">T·ªïng thu (T·∫•t c·∫£)</div>
            <div class="card-number" id="stat-in">ƒêang t·∫£i...</div>
        </div>
        <div class="stat-card orange">
            <div class="card-title">T·ªïng chi (T·∫•t c·∫£)</div>
            <div class="card-number" id="stat-out">ƒêang t·∫£i...</div>
        </div>
    </div>
</div>

<div class="content-container">
    <div class="table-card">
        <div class="toolbar">
            <h3>Danh s√°ch Thu Chi</h3>
            <div style="display:flex; gap:10px;">
                <button onclick="exportFundToExcel()" class="btn-primary-icon" style="background-color: #10b981;">
                    üìä Xu·∫•t Excel
                </button>
                
                <button onclick="openFundModal()" class="btn-primary-icon">
                    ‚ûï Th√™m Giao D·ªãch
                </button>
            </div>
        </div>

        <div class="table-responsive">
    <table class="excel-table">
        <thead>
            <tr>
                <th width="5%">STT</th>
                <th width="12%">Ng√†y gi·ªù</th>
                <th width="25%">N·ªôi dung</th>
                <th width="10%">Tags</th>
                <th width="12%" style="text-align:right">Thu</th>
                <th width="12%" style="text-align:right">Chi</th>
                <th width="14%" style="text-align:right">S·ªë d∆∞</th>
                <th width="5%" style="text-align:center">·∫¢nh</th>
                </tr>
            
            <tr class="filter-row">
                <th></th>
                <th>
                    <div class="filter-group-vertical">
                        <input type="date" id="f-date-start" onchange="filterTransactions()">
                        <input type="date" id="f-date-end" onchange="filterTransactions()">
                    </div>
                </th>
                <th><input type="text" id="f-title" onkeyup="filterTransactions()" placeholder="L·ªçc n·ªôi dung..."></th>
                <th><input type="text" id="f-tags" onkeyup="filterTransactions()" placeholder="L·ªçc tag..."></th>
                
                <th>
                    <input type="text" id="f-min-thu" placeholder=">= S·ªë ti·ªÅn..." onkeyup="formatCurrencyInput(this); filterTransactions()" style="text-align:right;">
                </th>
                <th>
                    <input type="text" id="f-min-chi" placeholder=">= S·ªë ti·ªÅn..." onkeyup="formatCurrencyInput(this); filterTransactions()" style="text-align:right;">
                </th>

                <th></th> <th></th> </tr>
        </thead>
        <tbody id="table-transaction-body">
            </tbody>
    </table>
</div>

        <div class="pagination-wrapper">
            <div class="rows-per-page">
                Hi·ªÉn th·ªã: 
                <select id="rows-select-fund" onchange="changeFundRowsPerPage()">
                    <option value="20">20 d√≤ng</option>
                    <option value="50">50 d√≤ng</option>
                    <option value="100">100 d√≤ng</option>
                    <option value="all">T·∫•t c·∫£</option>
                </select>
                
                <span style="margin-left: 8px; color: #4b5563; font-size: 13px;">
                T·ªïng: <b id="lbl-total-fund" style="color: #2563eb;">0</b> b·∫£n ghi
                </span>
            </div>

            <div id="pagination-fund" class="pagination-container"></div>
        </div>
    </div>
</div>

<div id="modal-transaction" class="modal-overlay">
    <div class="modal-content" style="max-width: 500px;"> <div class="modal-header">
            <h3 id="form-fund-title">Th√™m Giao D·ªãch M·ªõi</h3>
            <span class="close-btn" onclick="closeFundModal()">&times;</span>
        </div>
        
        <div id="form-transaction">
            <input type="hidden" id="t-id">
            <div class="input-grid" style="grid-template-columns: 1fr;"> <div class="input-group-col">
                    <label>N·ªôi dung:</label>
                    <input type="text" id="t-title" placeholder="V√≠ d·ª•: Mua vƒÉn ph√≤ng ph·∫©m">
                </div>

                <div class="input-grid" style="grid-template-columns: 1fr 1fr; gap:10px; margin:0;">
                    <div class="input-group-col">
                        <label>S·ªë ti·ªÅn:</label>
                        <input type="text" id="t-amount" placeholder="0" onkeyup="formatCurrencyInput(this)" onkeydown="handleAmountShortcuts(event)" style="font-weight:bold; color:#d63384;">
                    </div>
                    <div class="input-group-col">
                        <label>Lo·∫°i:</label>
                        <select id="t-type">
                            <option value="chi">Chi ti√™u üî¥</option>
                            <option value="thu">Thu nh·∫≠p üü¢</option>
                        </select>
                    </div>
                </div>

                <div class="input-group-col">
                    <label>Tags (Ph√¢n lo·∫°i):</label>
                    <input type="text" id="t-tags" placeholder="vd: an-uong, dien-nuoc">
                </div>

                <div class="input-group-col">
                    <label>ƒê√≠nh k√®m ·∫£nh:</label>
                    <input type="file" id="t-image">
                </div>
                 
                 <div class="input-group-col">
                    <label>Th·ªùi gian (B·ªè tr·ªëng = Hi·ªán t·∫°i):</label>
                     <input type="datetime-local" id="t-date-custom">
                 </div>

            </div>
            <div class="modal-footer">
                <button onclick="saveTransaction()" id="btn-save-fund" class="btn-save">L∆∞u Giao D·ªãch</button>
                <button onclick="closeFundModal()" class="btn-cancel">ƒê√≥ng</button>
            </div>
        </div>
    </div>
</div>

<div id="context-menu-fund" class="context-menu" style="display:none; position:absolute; z-index:1000; background:#fff; box-shadow:0 2px 10px rgba(0,0,0,0.2); border-radius:4px; overflow:hidden;">
    <div class="ctx-item" onclick="handleFundContextAction('edit')" style="padding:10px 20px; cursor:pointer; font-size:14px;">‚úèÔ∏è S·ª≠a</div>
    <div class="ctx-item" onclick="handleFundContextAction('duplicate')" style="padding:10px 20px; cursor:pointer; font-size:14px;">üìã Nh√¢n b·∫£n</div>
</div>

<style>
    /* CSS b·ªï sung ri√™ng cho b·∫£ng Fund */
    .col-thu { color: #10b981; font-weight: 600; }
    .col-chi { color: #ef4444; font-weight: 600; }
    .col-balance { font-weight: bold; color: #1e293b; }
    .date-small { font-size: 0.85em; color: #64748b; display:block;}
</style>